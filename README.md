# ðŸ›’ ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð° â„– 3

ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð·Ð°ÐºÐ°Ð·Ð¾Ð², Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸. Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð² ÑÐµÐ±Ñ:

- ðŸ“¦ Ð¡ÐµÑ€Ð²Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð¾Ð² (`orders-service`)
- ðŸ’° Ð¡ÐµÑ€Ð²Ð¸Ñ Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹ (`payments-service`)
- ðŸ§© ÐžÐ±Ñ‰Ð°Ñ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° (`common`)
- ðŸŒ API-ÑˆÐ»ÑŽÐ· (`gateway`)
- ðŸ˜ PostgreSQL, ðŸ³ Kafka, Docker Compose

---

## âš™ï¸ Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸

- Java 17 + Spring Boot
- Spring Web / Spring Data JPA
- PostgreSQL
- Apache Kafka
- Docker + Docker Compose
- OpenAPI / Swagger UI

---

## ðŸš€ ÐšÐ°Ðº Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ

> **Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ**: Docker, Docker Compose, Java 17, Maven

1. **Ð¡ÐºÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚:**

```bash
git clone https://github.com/Ayungich/sd_final_hw_3.git
cd shop-app
```

2. **Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸:**

```bash
mvn clean install
```

3. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹:**

```bash
docker compose up --build
```

> Ð£Ð±ÐµÐ´Ð¸ÑÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ñ€Ñ‚Ñ‹ `8080`, `8081`, `8082`, `5432`, `29092` ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ñ‹.

---

## ðŸŒ Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ðº Swagger UI

- API Gateway: [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)
- Orders: [http://localhost:8081/swagger-ui.html](http://localhost:8081/swagger-ui.html)
- Payments: [http://localhost:8082/swagger-ui.html](http://localhost:8082/swagger-ui.html)

---

## ðŸ§ª ÐšÐ°Ðº Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ

1. **Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚:**

`POST /accounts`

```json
Headers:
X-User-Id: 11111111-1111-1111-1111-111111111111

Body:
{
  "initialBalance": 100.0
}
```

2. **ÐŸÐ¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÑ‡Ñ‘Ñ‚:**

`POST /accounts/{id}/top-up`

```json
{
  "amount": 50.0
}
```

3. **Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·:**

`POST /orders`

```json
Headers:
X-User-Id: 11111111-1111-1111-1111-111111111111

Body:
{
  "amount": 120.0,
  "description": "Ð›ÐµÑ‚Ð½Ð¸Ðµ ÑˆÐ»Ñ‘Ð¿Ð°Ð½Ñ†Ñ‹"
}
```

4. **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·:**

`GET /orders/{id}`

5. **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð±Ð°Ð»Ð°Ð½Ñ:**

`GET /accounts/{id}`

---

## ðŸ§± ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

- ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑÐµÑ€Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½ÑƒÑŽ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… (PostgreSQL)
- Ð’Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸ â€” Ñ‡ÐµÑ€ÐµÐ· Kafka
- Exactly-once ÑÐµÐ¼Ð°Ð½Ñ‚Ð¸ÐºÐ° Ð½Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ outbox/inbox Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð¾Ñ‰Ñ‘Ð½Ð½Ð¾Ð¹ idempotent Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸)

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
shop-app/
â”œâ”€â”€ common/              # ÐžÐ±Ñ‰Ð¸Ðµ ÐºÐ»Ð°ÑÑÑ‹ Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ (Kafka Events, DTO)
â”œâ”€â”€ orders-service/      # ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð¾Ð²
â”œâ”€â”€ payments-service/    # ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸Ñ Ð¿Ð»Ð°Ñ‚Ñ‘Ð¶Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
â”œâ”€â”€ gateway/             # API-ÑˆÐ»ÑŽÐ·
â”œâ”€â”€ docker-compose.yml   # ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
â””â”€â”€ README.md
```

---

## âœ… Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾:

- [x] ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°
- [x] Kafka-Ð¾Ð±Ð¼ÐµÐ½ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸ÑÐ¼Ð¸
- [x] Outbox/Inbox ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹
- [x] Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¸ Ð²ÐµÐ¶Ð½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸
- [x] Swagger UI
- [x] Docker Compose
- [x] Ð ÑƒÑ‡Ð½Ð¾Ðµ Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· PowerShell/Swagger

---

## ðŸ§  ÐÐ²Ñ‚Ð¾Ñ€

> Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾ Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… ÑƒÑ‡ÐµÐ±Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°  
> - ÐÐ²Ñ‚Ð¾Ñ€: Ð›ÐµÑ„Ð°Ð½Ð¾Ð² ÐÐ¸ÐºÐ¸Ñ‚Ð° Ð®Ñ€ÑŒÐµÐ²Ð¸Ñ‡
> - [@ayungich](https://t.me/ayungich) â€” 2025
